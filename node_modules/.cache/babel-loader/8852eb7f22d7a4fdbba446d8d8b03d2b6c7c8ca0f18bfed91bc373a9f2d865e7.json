{"ast":null,"code":"import _slicedToArray from\"/home/giannism/Desktop/ergasia_sept_katan/MyVts-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useRef}from\"react\";import{useNavigate}from\"react-router-dom\";import Form from\"react-validation/build/form\";import Input from\"react-validation/build/input\";import CheckButton from\"react-validation/build/button\";import AuthService from\"../services/AuthService\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var required=function required(value){if(!value){return/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",role:\"alert\",children:\"This field is required!\"});}};var Login=function Login(){var navigate=useNavigate();var form=useRef();var checkBtn=useRef();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];var onChangeUsername=function onChangeUsername(e){var username=e.target.value;setUsername(username);};var onChangePassword=function onChangePassword(e){var password=e.target.value;setPassword(password);};var handleLogin=function handleLogin(e){e.preventDefault();setMessage(\"\");setLoading(true);form.current.validateAll();if(checkBtn.current.context._errors.length===0){AuthService.login(username,password).then(function(){navigate(\"/profile\");window.location.reload();},function(error){var resMessage=error.response&&error.response.data&&error.response.data.message||error.message||error.toString();setLoading(false);setMessage(resMessage);});}else{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card card-container\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"//ssl.gstatic.com/accounts/ui/avatar_2x.png\",alt:\"profile-img\",className:\"profile-img-card\"}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleLogin,ref:form,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",children:\"Username\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",className:\"form-control\",name:\"username\",value:username,onChange:onChangeUsername,validations:[required]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(Input,{type:\"password\",className:\"form-control\",name:\"password\",value:password,onChange:onChangePassword,validations:[required]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-success btn-block\",disabled:loading,children:[loading&&/*#__PURE__*/_jsx(\"span\",{className:\"spinner-border spinner-border-sm\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Login\"})]})}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",role:\"alert\",children:message})}),/*#__PURE__*/_jsx(CheckButton,{style:{display:\"none\"},ref:checkBtn})]})]})});};export default Login;","map":{"version":3,"names":["React","useState","useRef","useNavigate","Form","Input","CheckButton","AuthService","jsx","_jsx","jsxs","_jsxs","required","value","className","role","children","Login","navigate","form","checkBtn","_useState","_useState2","_slicedToArray","username","setUsername","_useState3","_useState4","password","setPassword","_useState5","_useState6","loading","setLoading","_useState7","_useState8","message","setMessage","onChangeUsername","e","target","onChangePassword","handleLogin","preventDefault","current","validateAll","context","_errors","length","login","then","window","location","reload","error","resMessage","response","data","toString","src","alt","onSubmit","ref","htmlFor","type","name","onChange","validations","disabled","style","display"],"sources":["/home/giannism/Desktop/ergasia_sept_katan/MyVts-frontend/src/components/Login.js"],"sourcesContent":["import React, { useState, useRef } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport Form from \"react-validation/build/form\";\nimport Input from \"react-validation/build/input\";\nimport CheckButton from \"react-validation/build/button\";\n\nimport AuthService from \"../services/AuthService\";\n\nconst required = (value) => {\n  if (!value) {\n    return (\n      <div className=\"alert alert-danger\" role=\"alert\">\n        This field is required!\n      </div>\n    );\n  }\n};\n\nconst Login = () => {\n  let navigate = useNavigate();\n\n  const form = useRef();\n  const checkBtn = useRef();\n\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState(\"\");\n\n  const onChangeUsername = (e) => {\n    const username = e.target.value;\n    setUsername(username);\n  };\n\n  const onChangePassword = (e) => {\n    const password = e.target.value;\n    setPassword(password);\n  };\n\n  const handleLogin = (e) => {\n    e.preventDefault();\n\n    setMessage(\"\");\n    setLoading(true);\n\n    form.current.validateAll();\n\n    if (checkBtn.current.context._errors.length === 0) {\n      AuthService.login(username, password).then(\n        () => {\n          navigate(\"/profile\");\n          window.location.reload();\n        },\n        (error) => {\n          const resMessage =\n            (error.response &&\n              error.response.data &&\n              error.response.data.message) ||\n            error.message ||\n            error.toString();\n\n          setLoading(false);\n          setMessage(resMessage);\n        }\n      );\n    } else {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"col-md-12\">\n      <div className=\"card card-container\">\n        <img\n          src=\"//ssl.gstatic.com/accounts/ui/avatar_2x.png\"\n          alt=\"profile-img\"\n          className=\"profile-img-card\"\n        />\n\n        <Form onSubmit={handleLogin} ref={form}>\n          <div className=\"form-group\">\n            <label htmlFor=\"username\">Username</label>\n            <Input\n              type=\"text\"\n              className=\"form-control\"\n              name=\"username\"\n              value={username}\n              onChange={onChangeUsername}\n              validations={[required]}\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label htmlFor=\"password\">Password</label>\n            <Input\n              type=\"password\"\n              className=\"form-control\"\n              name=\"password\"\n              value={password}\n              onChange={onChangePassword}\n              validations={[required]}\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <button\n              className=\"btn btn-outline-success btn-block\"\n              disabled={loading}\n            >\n              {loading && (\n                <span className=\"spinner-border spinner-border-sm\"></span>\n              )}\n              <span>Login</span>\n            </button>\n          </div>\n\n          {message && (\n            <div className=\"form-group\">\n              <div className=\"alert alert-danger\" role=\"alert\">\n                {message}\n              </div>\n            </div>\n          )}\n          <CheckButton style={{ display: \"none\" }} ref={checkBtn} />\n        </Form>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}